import React, {useEffect, useState} from 'react'
import {fetchCurrencies} from "api";
import {Link} from "react-router-dom";

const Currency = () => {
    const [usd, setUsd] = useState(0)
    const [eur, setEur] = useState(0)
    const [error, setError] = useState('')

    // console.log('usd', usd)
    // console.log('eur', eur)

    useEffect(async () => {
        try {
            const data = await fetchCurrencies()
            // console.log('data currency', data)
            setUsd(data.Valute.USD.Value.toFixed(2))
            setEur(data.Valute.EUR.Value.toFixed(2))
        } catch (err) {
            console.log('Error ', err)
            setError('Error...')
        }
    }, [])

    return (
        <Link to="/currencies" className="nav-link link-secondary">
            <div className="row justify-content-md-center" style={{marginTop: '10px'}}>
                {error && <span className="text-danger">{error}</span>}
                <div className="col-auto"><h5>$ {usd}</h5></div>
                <div className="col-auto"><h5>&#8364; {eur}</h5></div>
            </div>
        </Link>
    )
}

export default Currency