import React, {useState} from 'react'
import {withGoogleMap, GoogleMap, Marker, TrafficLayer} from 'react-google-maps'

const GoogleMapContainer = () => {
    const [isTraffic, setIsTraffic] = useState(false)

    return (
        <div>
            <div className="row">
                <div className="col-auto" style={{margin: '10px'}}>
                    <div
                        className="form-check"
                        style={{margin: '10px', fontFamily: 'titillium web,sans-serif', color: "#5cb85c"}}
                    >
                        <input
                            className="form-check-input"
                            type="checkbox"
                            checked={isTraffic}
                            onChange={e => setIsTraffic(e.target.checked)}
                            id="flexCheckDefault"
                        />
                        <label className="form-check-label" htmlFor="flexCheckDefault">
                            Traffic
                        </label>
                    </div>
                </div>
            </div>
            <MyMapComponent
                isTraffic={isTraffic}
                isMarkerShown
                googleMapURL="https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=geometry,drawing,places"
                loadingElement={<div style={{height: `100%`}}/>}
                containerElement={<div style={{height: `500px`}}/>}
                mapElement={<div style={{height: `100%`}}/>}
            />
        </div>
    )
}

const MyMapComponent = withGoogleMap(({isTraffic, ...props}) =>
    <GoogleMap
        defaultZoom={10}
        defaultCenter={{lat: 55.7522, lng: 37.6156}}
    >
        {props.isMarkerShown && <Marker position={{lat: 55.7522, lng: 37.6156}}/>}
        {isTraffic && <TrafficLayer autoUpdate/>}
    </GoogleMap>
)

export default GoogleMapContainer