import React, {useEffect, useState} from 'react'
import {Link} from "react-router-dom";

import 'pages/home/styles.css'
import DateComponent from 'components/date'
import Watch from 'components/watch'
import Weather from 'components/weather'
import Currency from 'components/currency'
import News from 'pages/news'
import {getNews} from "api";

const Home = () => {
    const [category, setCategory] = useState('')
    const [articles, setArticles] = useState([])
    // console.log('articles', articles)

    useEffect(async () => {
        const data = await getNews(category)
        // console.log('news', data)
        setArticles(data.articles)
    }, [category])

    return (
        <>
            <div className="row" style={{marginBottom: '15px'}}>
                <div className="col-md-auto init1">
                    <DateComponent/>
                </div>
                <div className="col-md-auto init1">
                    <Watch/>
                </div>
                <div className="col-md-auto init2">
                    <Weather/>
                </div>
                <div className="col-md-auto init2">
                    <Currency/>
                </div>
                <div className="col-md-auto init2">
                    <Link to="/map" className="nav-link link-secondary" style={{margin: '20px 15px'}}>
                        <h5>Map</h5>
                    </Link>
                </div>
            </div>
            <div className="row justify-content-md-center">
                <div className="col-md-3">
                    <div className="row">
                        <div className="col-md-12" style={{border: '1px solid #808080'}}>
                            BLOCK
                        </div>
                    </div>
                </div>
                {articles
                    ? <div className="col-md-6">
                        <News articles={articles}/>
                    </div>
                    : <div className="col-md-6">
                        <h5>Loading...</h5>
                    </div>
                }
                {articles &&
                <div className="col-md-3">
                    <div className="row">
                        <div className="col-md-12" style={{border: '1px solid black', borderRadius: '5px'}}>
                            <div><p className="category active" onClick={() => setCategory('')}>all news</p></div>
                            <div><p className="category" onClick={() => setCategory('business')}>business</p></div>
                            <div><p className="category" onClick={() => setCategory('entertainment')}>entertainment</p>
                            </div>
                            <div><p className="category" onClick={() => setCategory('health')}>health</p></div>
                            <div><p className="category" onClick={() => setCategory('science')}>science</p></div>
                            <div><p className="category" onClick={() => setCategory('sports')}>sports</p></div>
                            <div><p className="category" onClick={() => setCategory('technology')}>technology</p></div>
                        </div>
                    </div>
                </div>
                }
            </div>
            <div id="toTop"><b>наверх</b></div>
        </>
    )
}

export default Home